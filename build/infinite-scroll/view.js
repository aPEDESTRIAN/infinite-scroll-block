(()=>{const e={},t="apedestrian-infinite-scroll";function n(t){return document.getElementById(e[t].elementId).getBoundingClientRect().top-window.innerHeight<=e[t].loadingDistance}function l(t){c(t)?o(t):n(t)?r(t):e[t].intervalId=setInterval((()=>{n(t)&&(clearInterval(e[t].intervalId),r(t))}),1e3)}function r(t){const n=e[t].urlPattern.replace("{pageNum}",++e[t].currentPage);fetch(n).then((e=>e.text())).then((n=>{const r=(new DOMParser).parseFromString(n,"text/html"),d=r?r.getElementById(e[t].elementId):null,a=d?d.closest(".wp-block-query"):null,u=a?a.querySelector(".wp-block-post-template"):null,i=[];if(u&&u.querySelectorAll("li.wp-block-post").forEach((e=>{i.push(e)})),0===i.length)o(t);else{const n=document.getElementById(e[t].elementId),r=n?n.closest(".wp-block-query"):null,d=r?r.querySelector(".wp-block-post-template"):null;d?(i.forEach((e=>{d.appendChild(e)})),c(t)?o(t):l(t)):o(t)}})).catch()}function o(n){document.querySelectorAll(`#${e[n].elementId} .wp-block-${t}-end--hidden`).forEach((e=>{e.classList.remove(`wp-block-${t}-end--hidden`)})),document.querySelectorAll(`#${e[n].elementId} .wp-block-${t}-loading`).forEach((e=>{e.remove()})),delete e[n]}function c(t){return""==e[t].urlPattern||0!==e[t].maxPage&&e[t].maxPage===e[t].currentPage}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(`pre.${t}-data`).forEach((n=>{const r=JSON.parse(n.innerHTML);e[r.queryId]=r,e[r.queryId].elementId=`${t}-${r.queryId}`,n.remove(),l(r.queryId)}))}))})();